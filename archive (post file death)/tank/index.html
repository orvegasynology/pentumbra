<!-- if you come here to mooch off of code be my guest. Do it. just dont steal graphics. if you wanna know where i found something, email me!-->
<!DOCTYPE html>
<html oncontextmenu="return false;">

<head>
    <!-- Boring Stuff -->
    <title>PENTUMBRA / Crittering</title>
    <meta charset="UTF-8">
    <link rel="icon" href="/data/assets/pokemon/arcanine.gif" type="image/x-icon">
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/stylesheets/main.css" type="text/css">
    <link rel="stylesheet" href="/stylesheets/webring/index.css" type="text/css">
    <link rel="stylesheet" href="/stylesheets/font-bitmap.css" type="text/css">

</head>

<body>
    <crittering-script site="https://pentumbra.space"></crittering-script>
    <script src="https://pentumbra.space/scripts/webring/critter.js"></script>
    <script type="text/javascript">
        fetch("/scripts/webring/critter.json")
                                .then(function(response) {
                                    return response.json();
                                })
                                .then(function(critters) {
                                    let placeholder = document.querySelector("#data-output");
                                    let out = "";
                                    for (let ring of critters) {
                                        out += `
	         <tr>
	            <td> <img src='${ring.critterimg}'> ${ring.crittername}</td>
	            <td>${ring.date}</td>
	            <td>${ring.webmastername} <br> <a href="${ring.url}">${ring.url}<br><img src="${ring.button}"> </a></td>
	         </tr>
	      `;
                                    }

                                    placeholder.innerHTML = out;
                                });

    </script>

    <table class="claimed">
        <thead>
            <tr>
                <th style="width: 150px;">Critter</th>
                <th style="width: 150px;">Discovered</th>
                <th style="width: 300px;">Belongs to</th>
            </tr>
        </thead>
        <tbody id="data-output">
        </tbody>
    </table>
    <script>
        async function fetchCritterData() {
            const response = await fetch('https://pentumbra.space/scripts/webring/critter.json');
            return await response.json();
        }

        function createEntity(critterImg) {
            const entity = document.createElement('div');
            entity.className = 'entity';
            entity.style.backgroundImage = `url(${critterImg})`;
            document.getElementById('container').appendChild(entity);
            moveEntity(entity);
        }

        function moveEntity(entity) {
            const screenWidth = window.innerWidth;
            const screenHeight = window.innerHeight;
            let x = Math.random() * screenWidth;
            let y = Math.random() * screenHeight;
            entity.style.left = `${x}px`;
            entity.style.top = `${y}px`;

            const direction = Math.random() * 360;
            const radians = direction * (Math.PI / 180);
            const speed = 2;

            const moveInterval = setInterval(() => {
                x += Math.cos(radians) * speed;
                y += Math.sin(radians) * speed;

                if (x < 0 || x > screenWidth || y < 0 || y > screenHeight) {
                    clearInterval(moveInterval);
                    entity.remove();
                } else {
                    entity.style.left = `${x}px`;
                    entity.style.top = `${y}px`;
                    entity.style.transform = `rotate(${direction}deg)`;
                }
            }, 100);
        }

        async function init() {
            const data = await fetchCritterData();
            data.ring.forEach(critter => {
                createEntity(critter.critterimg);
            });
        }

        window.onload = init;
    </script>
    <div id="container"></div>
    <!--<script>
fetch('https://pentumbra.space/scripts/webring/critter.json')
  .then(response => response.json())
  .then(data => {
    const matchedSite = data[Math.floor(Math.random() * data.length)];
    const critterContainer = document.createElement('div');
    critterContainer.innerHTML = `
      <div style="width: 175px; height: 125px; position: absolute; text-align: center; cursor: pointer;">
        <img src="${matchedSite.critterimg}" alt="${matchedSite.quote}" style="max-width: 100%; max-height: 100%;">
        <div style="display: none; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255, 255, 255, 0.8);">
          <p>${matchedSite.webmastername}</p>
          <p>${matchedSite.crittername}</p>
        </div>
        <a href="${matchedSite.url}" style="display: block; margin-top: 5px;">Enter</a>
      </div>
    `;
    critterContainer.style.top = `${Math.random() * window.innerHeight}px`;
    critterContainer.style.left = `${Math.random() * window.innerWidth}px`;
    document.body.appendChild(critterContainer);

    critterContainer.addEventListener('click', () => {
      const infoDiv = critterContainer.querySelector('div');
      infoDiv.style.display = infoDiv.style.display === 'none' ? 'block' : 'none';
    });
  });

    </script>-->
</body>

</html>
